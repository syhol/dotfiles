#!/usr/bin/env bash

PATH="$PATH:$HOME/.local/bin:/opt/homebrew/bin"

# Homebrew
if ! command -v brew &>/dev/null; then
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi
brew bundle install --upgrade --cleanup --file ~/.config/brewfile/Brewfile

# Mise
if ! command -v mise &>/dev/null; then
  curl https://mise.run | sh
fi
mise self-update --yes
mise install --yes
mise upgrade --yes
mise prune --yes

# Helm
helm plugin install https://github.com/databus23/helm-diff || true
helm plugin update diff

# Github
gh extension install dlvhdr/gh-dash
gh extension upgrade --all

# Yazi
ya pkg install

# Bat
bat cache --build

# Shell plugins
~/.config/fish/sync_plugins.fish
~/.config/zsh/sync_plugins.zsh
touch ~/.config/shell/secrets.sh
